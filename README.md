## Тестовое задание 
В рамках тестового задания выполнены следующие задачи: протестировано API для выдачи регионов, оформлены баг-репорты с найденными ошибками, составлены тест-кейсы и написаны автотесты, проверяющие корректность работы API.

## Общие комментарии

Я не знакома с вашим дизайном API, но, исходя из предоставленных ответов, предполагаю, что у вас принято возвращать статус 200 с ошибкой в теле ответа. В рамках выполнения тестового задания я не буду считать это ошибкой. Однако, в стандартной практике неправильные параметры обычно возвращают статус 400.

Также, в отсутствии уникальных кодов для ошибок было принято решение сравнивать ошибки по тексту. Это решение имеет свои недостатки, так как текст ошибки может измениться, и такие проверки могут стать неактуальными. Более надежным подходом было бы использование уникальных кодов ошибок.

[Ссылка на тест-кейсы](https://docs.google.com/spreadsheets/d/12UkACFF7niPAb7RmRAC3NLYDVaQvhwblCCQABPpcs9M/edit?usp=sharing)


### Баг-репорты:

### ID: 1
**При вводе региона “kg” в Код страны отображается “kz”**

**Шаги воспроизведения:** GET запрос на `/1.0/regions?country_code=kg`

**Ожидаемый результат:** По запросу отображаются только страны с регионом “kg”

```json
{
    "items": [
        {
            "id": 112,
            "name": "Бишкек",
            "code": "bishkek",
            "country": {
                "name": "Кыргызстан",
                "code": "kg"
            }
        },
        {
            "id": 171,
            "name": "Ош",
            "code": "osh",
            "country": {
                "name": "Кыргызстан",
                "code": "kg"
            }
        }
    ]
}
```

**Фактический результат:** По запросу отображаются страны с регионом “kg” и “kz”

```json 
{
    "items": [
        {
            "id": 196,
            "name": "Актау",
            "code": "aktau",
            "country": {
                "name": "Казахстан",
                "code": "kz"
            }
        },
        {
            "id": 167,
            "name": "Актобе",
            "code": "aktobe",
            "country": {
                "name": "Казахстан",
                "code": "kz"
            }
        },
        {
            "id": 67,
            "name": "Алматы",
            "code": "almaty",
            "country": {
                "name": "Казахстан",
                "code": "kz"
            }
        },
        {
            "id": 112,
            "name": "Бишкек",
            "code": "bishkek",
            "country": {
                "name": "Кыргызстан",
                "code": "kg"
            }
        },
        {
            "id": 171,
            "name": "Ош",
            "code": "osh",
            "country": {
                "name": "Кыргызстан",
                "code": "kg"
            }
        },
        {
            "id": 91,
            "name": "Усть-Каменогорск",
            "code": "ustkam",
            "country": {
                "name": "Казахстан",
                "code": "kz"
            }
        }
    ]
}
```

**Приоритет**: Высокий

**Окружение**: Тестовое


### ID: 2
**При вводе региона “kz” в Код страны отображается “kg”**

**Шаги воспроизведения:**
GET запрос на `/1.0/regions?country_code=kz`

**Ожидаемый результат:**
По запросу отображаются только страны с регионом “kz”

```json
{
    "items": [
        {
            "id": 196,
            "name": "Актау",
            "code": "aktau",
            "country": {
                "name": "Казахстан",
                "code": "kz"
            }
        },
        {
            "id": 167,
            "name": "Актобе",
            "code": "aktobe",
            "country": {
                "name": "Казахстан",
                "code": "kz"
            }
        },
        {
            "id": 67,
            "name": "Алматы",
            "code": "almaty",
            "country": {
                "name": "Казахстан",
                "code": "kz"
            }
        },
        {
            "id": 91,
            "name": "Усть-Каменогорск",
            "code": "ustkam",
            "country": {
                "name": "Казахстан",
                "code": "kz"
            }
        }
    ]
}

```
**Фактический результат:**
По запросу отображаются страны с регионом “kz” и “kg”
```json
{
    "items": [
        {
            "id": 196,
            "name": "Актау",
            "code": "aktau",
            "country": {
                "name": "Казахстан",
                "code": "kz"
            }
        },
        {
            "id": 167,
            "name": "Актобе",
            "code": "aktobe",
            "country": {
                "name": "Казахстан",
                "code": "kz"
            }
        },
        {
            "id": 67,
            "name": "Алматы",
            "code": "almaty",
            "country": {
                "name": "Казахстан",
                "code": "kz"
            }
        },
        {
            "id": 112,
            "name": "Бишкек",
            "code": "bishkek",
            "country": {
                "name": "Кыргызстан",
                "code": "kg"
            }
        },
        {
            "id": 171,
            "name": "Ош",
            "code": "osh",
            "country": {
                "name": "Кыргызстан",
                "code": "kg"
            }
        },
        {
            "id": 91,
            "name": "Усть-Каменогорск",
            "code": "ustkam",
            "country": {
                "name": "Казахстан",
                "code": "kz"
            }
        }
    ]
}

 ```

**Приоритет**: Высокий

**Окружение**: Тестовое

### ID: 3
**Неверное поведение при вводе некорректного кода страны "ua" в параметре country_code**

**Шаги воспроизведения:**
GET запрос на `https://regions-test.2gis.com/1.0/regions?country_code=ua`

**Ожидаемый результат:**
Вывод ошибки

```json

{
    "error": {
        "id": "9d00680a-c742-49f8-b729-8076ba066fa4",
        "message": "Параметр 'country_code' может быть одним из следующих значений: ru, kg, kz, cz"
    }
}

 ```
**Фактический результат:**
По запросу отображается страна с регионом “ua”
```json
{
    "items": [
        {
            "id": 105,
            "name": "Днепр",
            "code": "dnepropetrovsk",
            "country": {
                "name": "Украина",
                "code": "ua"
            }
        }
    ]
}
```
**Приоритет**: Высокий

**Окружение**: Тестовое

### ID: 4
**По умолчанию отображается 10 элементов на странице вместо 15**

**Шаги воспроизведения:**
GET запрос на `https://regions-test.2gis.com/1.0/regions`

**Ожидаемый результат:**
По умолчанию отображается 15 элементов на странице

```json
{
    "items": [
        {
            "id": 196,
            "name": "Актау",
            "code": "aktau",
            "country": {
                "name": "Казахстан",
                "code": "kz"
            }
        },
        {
            "id": 167,
            "name": "Актобе",
            "code": "aktobe",
            "country": {
                "name": "Казахстан",
                "code": "kz"
            }
        },
        {
            "id": 67,
            "name": "Алматы",
            "code": "almaty",
            "country": {
                "name": "Казахстан",
                "code": "kz"
            }
        },
        {
            "id": 112,
            "name": "Бишкек",
            "code": "bishkek",
            "country": {
                "name": "Кыргызстан",
                "code": "kg"
            }
        },
        {
            "id": 114,
            "name": "Владикавказ",
            "code": "vladikavkaz",
            "country": {
                "name": "Россия",
                "code": "ru"
            }
        },
        {
            "id": 25,
            "name": "Владивосток",
            "code": "vladivostok",
            "country": {
                "name": "Россия",
                "code": "ru"
            }
        },
        {
            "id": 105,
            "name": "Днепр",
            "code": "dnepropetrovsk",
            "country": {
                "name": "Украина",
                "code": "ua"
            }
        },
        {
            "id": 7,
            "name": "Красноярск",
            "code": "krasnoyarsk",
            "country": {
                "name": "Россия",
                "code": "ru"
            }
        },
        {
            "id": 26,
            "name": "Магнитогорск",
            "code": "magnitogorsk",
            "country": {
                "name": "Россия",
                "code": "ru"
            }
        },
        {
            "id": 32,
            "name": "Москва",
            "code": "moscow",
            "country": {
                "name": "Россия",
                "code": "ru"
            }
        },
        {
            "id": 19,
            "name": "Нижний Новгород",
            "code": "n_novgorod",
            "country": {
                "name": "Россия",
                "code": "ru"
            }
        },
        {
            "id": 1,
            "name": "Новосибирск",
            "code": "novosibirsk",
            "country": {
                "name": "Россия",
                "code": "ru"
            }
        },
        {
            "id": 2,
            "name": "Омск",
            "code": "omsk",
            "country": {
                "name": "Россия",
                "code": "ru"
            }
        },
        {
            "id": 71,
            "name": "Орёл",
            "code": "orel",
            "country": {
                "name": "Россия",
                "code": "ru"
            }
        },
        {
            "id": 171,
            "name": "Ош",
            "code": "osh",
            "country": {
                "name": "Кыргызстан",
                "code": "kg"
            }
        }
    ]
}
```
**Фактический результат:**
По умолчанию отображается 10 элементов на странице
```json
{
    "items": [
        {
            "id": 196,
            "name": "Актау",
            "code": "aktau",
            "country": {
                "name": "Казахстан",
                "code": "kz"
            }
        },
        {
            "id": 167,
            "name": "Актобе",
            "code": "aktobe",
            "country": {
                "name": "Казахстан",
                "code": "kz"
            }
        },
        {
            "id": 67,
            "name": "Алматы",
            "code": "almaty",
            "country": {
                "name": "Казахстан",
                "code": "kz"
            }
        },
        {
            "id": 112,
            "name": "Бишкек",
            "code": "bishkek",
            "country": {
                "name": "Кыргызстан",
                "code": "kg"
            }
        },
        {
            "id": 114,
            "name": "Владикавказ",
            "code": "vladikavkaz",
            "country": {
                "name": "Россия",
                "code": "ru"
            }
        },
        {
            "id": 25,
            "name": "Владивосток",
            "code": "vladivostok",
            "country": {
                "name": "Россия",
                "code": "ru"
            }
        },
        {
            "id": 105,
            "name": "Днепр",
            "code": "dnepropetrovsk",
            "country": {
                "name": "Украина",
                "code": "ua"
            }
        },
        {
            "id": 7,
            "name": "Красноярск",
            "code": "krasnoyarsk",
            "country": {
                "name": "Россия",
                "code": "ru"
            }
        },
        {
            "id": 26,
            "name": "Магнитогорск",
            "code": "magnitogorsk",
            "country": {
                "name": "Россия",
                "code": "ru"
            }
        },
        {
            "id": 32,
            "name": "Москва",
            "code": "moscow",
            "country": {
                "name": "Россия",
                "code": "ru"
            }
        }
    ]
}
```
**Приоритет**: Низкий

**Окружение**: Тестовое

### ID: 5
**Система не принимает букву "ё" в названии региона**

**Шаги воспроизведения:**
GET запрос на `https://regions-test.2gis.com/1.0/regions?q=Орёл`

**Ожидаемый результат:**
Ответ содержит результаты для "Орёл"

```json
{

    "items": [
        {
            "id": 71,
            "name": "Орёл",
            "code": "orel",
            "country": {
                "name": "Россия",
                "code": "ru"
            }
        }
    ]
}
```
**Фактический результат:**
Ответ не содержит результаты для "Орёл". Пустой массив
```json
{
    "items": []
}
```
**Приоритет:** Средний


**Окружение:** Тестовое


**Комментарий:**
Будем считать багом, так как нет условия в требованиях, в которых бы говорилось, что "ё" не принимается

### ID: 6
**Орфографическая ошибка в тексте ответа**

**Шаги воспроизведения:**
GET запрос на `https://regions-test.2gis.com/1.0/regions?page_size=`

**Ожидаемый результат:**
“Параметр ‘page_size’ должен быть целым числом”

**Фактический результат:**
“Параметр ‘page_size’ длжен быть целым числом”
```json
{
    "error": {
        "id": "510723c5-ac5d-4c9d-8134-7c30e10412c2",
        "message": "Параметр 'page_size' длжен быть целым числом"
    }
}
```
**Приоритет:** Низкий

**Окружение:** Тестовое


### ID: 7
**Параметр “total” не соответствует количеству найденных регионов по запросу**

**Шаги воспроизведения:**
GET запрос на `https://regions-test.2gis.com/1.0/regions?q=Новосибирск`

**Ожидаемый результат:**
“total” соответствует количеству найденных регионов по запросу

```json
{
    "total": 1,
    "items": [
        {
            "id": 1,
            "name": "Новосибирск",
            "code": "novosibirsk",
            "country": {
                "name": "Россия",
                "code": "ru"
            }
        }
    ]
}
```
**Фактический результат:**
Параметр “total” не соответствует количеству найденных регионов по запросу
```json
{
    "total": 22,
    "items": [
        {
            "id": 1,
            "name": "Новосибирск",
            "code": "novosibirsk",
            "country": {
                "name": "Россия",
                "code": "ru"
            }
        }
    ]
}
```
**Приоритет:** Высокий

**Окружение:** Тестовое

### ID: 8
**Значение параметра "total" не соответствует фактическому количеству регионов в массиве данных**

**Шаги воспроизведения:**
GET запрос на:
- `https://regions-test.2gis.com/1.0/regions?page=1`
- `https://regions-test.2gis.com/1.0/regions?page=2`
- `https://regions-test.2gis.com/1.0/regions?page=3`

Посмотрите на значение параметра "total" в ответе API. Посчитайте количество регионов в массиве данных.

**Ожидаемый результат:**
Значение параметра "total" соответствует фактическому количеству (26) региона в массиве данных 

**Фактический результат:**
Значение параметра "total" равно 22, несмотря на наличие 26 регионов в в массиве данных 

**Приоритет:** Высокий

**Окружение:** Тестовое

### ID: 9
**Невозможность поиска региона с названием "Ош"**

**Шаги воспроизведения:**
GET запрос на `https://regions-test.2gis.com/1.0/regions?q=Ош`

**Ожидаемый результат:**
В ответе должен быть регион с названием "Ош".

**Фактический результат:**
Не позволяет выполнить поиск, так как строка "Ош" содержит менее 3 символов.

```json
{
    "error": {
        "id": "0b13d3c6-9685-4340-81d7-a71e2c655d40",
        "message": "Параметр 'q' должен быть не менее 3 символов"
    }
}
```
**Комментарий:**
Параметр q должен позволять вводить названия длиной менее 3 символов, так как в базе данных есть такие города.

**Приоритет:** Средний

**Окружение:** Тестовое


### ID: 10
**Некорректный ответ при пустом параметре q**

**Шаги воспроизведения:**
GET запрос на `https://regions-test.2gis.com/1.0/regions?q=`

**Ожидаемый результат:**
Вывод ошибки с сообщением "Параметр 'q' должен быть не менее 3 символов" и статус-кодом 200

```json
{
    "error": {
        "id": "af25c85c-4283-40fe-a628-89faee93bcbb",
        "message": "Параметр 'q' должен быть не менее 3 символов"
    }
}
```
**Фактический результат:**
API возвращает 404 ошибку
```html
<html>
<head>
    <title>404 Not Found</title>
</head>

<body>
    <center>
        <h1>404 Not Found</h1>
    </center>
    <hr>
    <center>nginx</center>
</body>
</html>
```
**Приоритет:** Высокий

**Окружение:** Тестовое

### ID: 11
**Элементы дублируются на следующих страницах**

**Шаги воспроизведения:**
GET запрос на:
- `https://regions-test.2gis.com/1.0/regions?page=1&page_size=5`
- `https://regions-test.2gis.com/1.0/regions?page=2&page_size=5`


**Ожидаемый результат:**
Каждый элемент на странице уникален и не повторяется на следующих страницах

**Фактический результат:**
Последний в списке элемент на странице не уникален и повторяется на следующей странице

```json

{
    "items": [
        {
            "id": 196,
            "name": "Актау",
            "code": "aktau",
            "country": {
                "name": "Казахстан",
                "code": "kz"
            }
        },
        {
            "id": 167,
            "name": "Актобе",
            "code": "aktobe",
            "country": {
                "name": "Казахстан",
                "code": "kz"
            }
        },
        {
            "id": 67,
            "name": "Алматы",
            "code": "almaty",
            "country": {
                "name": "Казахстан",
                "code": "kz"
            }
        },
        {
            "id": 112,
            "name": "Бишкек",
            "code": "bishkek",
            "country": {
                "name": "Кыргызстан",
                "code": "kg"
            }
        },
        {
            "id": 114,
            "name": "Владикавказ",
            "code": "vladikavkaz",
            "country": {
                "name": "Россия",
                "code": "ru"
            }
        },
        {
        "id": 114,
            "name": "Владикавказ",
            "code": "vladikavkaz",
            "country": {
                "name": "Россия",
                "code": "ru"
            }
        }
    ]
}
```
**Приоритет:** Средний

**Окружение:** Тестовое

### ID: 12
**Некорректный ответ при вводе значения "0" в порядковый номер страницы**

**Шаги воспроизведения:** GET запрос на https://regions-test.2gis.com/1.0/regions?page=0

**Ожидаемый результат:** Вывод ошибки с сообщением Параметр 'page' должен быть целым числом. HTTP Status: 200  
**Фактический результат:** HTTP Status: 500 

```json
500 Internal Server Error

Server got itself in trouble
```
**Приоритет:** Высокий

**Окружение:** Тестовое

